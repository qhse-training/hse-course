<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OHSMS Test Final</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background-color: #f4f4f4; }
    h1 { text-align: center; }
    .question { margin-bottom: 20px; background: white; padding: 15px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .options label { display: block; margin-bottom: 5px; cursor: pointer; }
    button { display: block; margin: 30px auto; padding: 10px 20px; background: #27ae60; color: white; border: none; border-radius: 5px; cursor: pointer; }
    .result { text-align: center; margin-top: 30px; font-weight: bold; }
  </style>
</head>
<body>
  <h1>Occupational Health and Safety Management System Test</h1>
  <form id="testForm"></form>
  <button id="submitTest">Submit Test</button>
  <div id="result" class="result"></div>

  <script>
    const questions = [
      { q: "What is the main goal of OHSMS?", a: 2, o: ["Increase profit", "Reduce working hours", "Ensure workplace safety", "Decrease costs"] },
      { q: "Which standard is commonly used for OHSMS?", a: 2, o: ["ISO 9001", "ISO 14001", "ISO 45001", "ISO 27001"] },
      { q: "What is the first step in implementing OHSMS?", a: 1, o: ["Hiring a consultant", "Risk assessment", "Writing procedures", "Employee training"] },
      { q: "What does PDCA stand for in OHSMS?", a: 0, o: ["Plan, Do, Check, Act", "Prepare, Develop, Control, Assess", "Protect, Define, Create, Analyze", "Prevent, Detect, Correct, Audit"] },
      { q: "Who is ultimately responsible for workplace safety?", a: 2, o: ["Employees", "Safety officers", "Management", "Government"] },
      { q: "What is a hazard in OHSMS terms?", a: 1, o: ["An accident that has occurred", "A potential source of harm", "A safety procedure", "A type of PPE"] },
      { q: "What is the purpose of a risk assessment?", a: 1, o: ["To assign blame for accidents", "To identify and control workplace hazards", "To reduce employee benefits", "To increase production speed"] },
      { q: "What does PPE stand for?", a: 2, o: ["Personal Productivity Equipment", "Protective Professional Equipment", "Personal Protective Equipment", "Professional Protective Ensemble"] },
      { q: "When should safety training be provided to employees?", a: 1, o: ["Only when hired", "When hired and when risks change", "Only after an accident occurs", "Once every five years"] },
      { q: "What is an incident in OHSMS terms?", a: 1, o: ["A planned safety inspection", "An unplanned event that could cause harm", "A safety committee meeting", "A type of safety drill"] },
      { q: "What is the purpose of a safety audit?", a: 1, o: ["To find employees breaking rules", "To evaluate the effectiveness of safety systems", "To reduce safety equipment costs", "To increase production quotas"] },
      { q: "What should be done first when an accident occurs?", a: 1, o: ["Assign blame", "Secure the scene and provide first aid", "Continue working", "Call a meeting"] },
      { q: "What is a near miss?", a: 1, o: ["An incident that resulted in injury", "An unplanned event that didn't result in harm", "A safety inspection", "A type of PPE"] },
      { q: "Why is worker participation important in OHSMS?", a: 3, o: ["Workers know the hazards best", "It reduces management workload", "It's required by law", "All of the above"] },
      { q: "What is the hierarchy of controls?", a: 1, o: ["A list of safety managers", "A system to prioritize hazard controls", "A type of safety training", "A government regulation"] },
      { q: "Which is the most effective hazard control?", a: 1, o: ["PPE", "Elimination of the hazard", "Warning signs", "Training"] },
      { q: "What is a safety culture?", a: 1, o: ["A government safety agency", "The shared values about safety in an organization", "A type of safety training program", "A safety certification"] },
      { q: "Why document safety procedures?", a: 3, o: ["For legal compliance", "To ensure consistent safety practices", "For training purposes", "All of the above"] },
      { q: "What is continuous improvement in OHSMS?", a: 1, o: ["A one-time safety audit", "An ongoing process to enhance safety", "A type of safety training", "A government regulation"] },
      { q: "What is management's role in OHSMS?", a: 3, o: ["Provide resources and leadership", "Enforce safety rules", "Conduct safety inspections", "All of the above"] }
    ];

    const form = document.getElementById("testForm");
    const resultDiv = document.getElementById("result");

    questions.forEach((q, i) => {
      const div = document.createElement("div");
      div.className = "question";
      div.innerHTML = `<strong>${i + 1}. ${q.q}</strong>`;

      q.o.forEach((opt, idx) => {
        const id = `q${i}_opt${idx}`;
        div.innerHTML += `<div class="options"><label><input type="radio" name="q${i}" value="${idx}" id="${id}"> ${opt}</label></div>`;
      });

      form.appendChild(div);
    });

    document.getElementById("submitTest").addEventListener("click", () => {
      let score = 0;
      questions.forEach((q, i) => {
        const selected = form.querySelector(`input[name="q${i}"]:checked`);
        if (selected && parseInt(selected.value) === q.a) score++;
      });
      const percent = Math.round((score / questions.length) * 100);
      resultDiv.textContent = `Your Score: ${score}/${questions.length} (${percent}%)`;

      if (percent >= 95) {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        doc.setFontSize(22);
        doc.text("Certificate of Completion", 105, 30, null, null, "center");
        doc.setFontSize(16);
        doc.text("This certifies that", 105, 50, null, null, "center");
        doc.setFontSize(20);
        doc.text("John Smith", 105, 60, null, null, "center");
        doc.setFontSize(16);
        doc.text("has successfully completed the course", 105, 75, null, null, "center");
        doc.setFontSize(18);
        doc.text("Occupational Health and Safety Management System", 105, 85, null, null, "center");
        doc.setFontSize(14);
        doc.text(`Date: ${new Date().toLocaleDateString()}`, 20, 120);
        doc.text("Signature: ____________________", 20, 135);
        doc.save("OHSMS_certificate.pdf");
      }
    });
  </script>
</body>
</html>
